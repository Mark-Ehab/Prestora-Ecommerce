<!-- Angular Template Engine Variables for Forget Password Component -->
@let emailControl = verifyEmailForm.get("email"); @let newPasswordControl =
setNewPasswordForm.get("newPassword");

<section
  id="forget-password"
  class="p-5 bg-bg-main h-screen flex items-center justify-center"
>
  <div
    class="grid grid-cols-12 shadow-[0_0_8px_rgba(0,0,0,0.5)] max-w-[61.8333rem] h-full grow lg:mx-auto"
  >
    <div
      class="col-span-12 md:col-span-6 p-10 h-full flex justify-center flex-col"
    >
      <h2
        class="font-semibold text-[2rem] text-text-main text-center mb-6 self-start"
      >
        Forget Password
      </h2>
      @if(step === 1){
      <form [formGroup]="verifyEmailForm" (ngSubmit)="submitVerifyEmailFrom()">
        <input-field
          [label]="'Email'"
          [type]="'email'"
          [id]="'email'"
          [name]="'email'"
          [placeholder]="'Ex: example@example.com'"
          [control]="emailControl"
        ></input-field>
        <button class="forget-password-btns">Verify Email</button>
      </form>
      } @else if(step === 2){
      <form
        class="max-w-sm"
        [formGroup]="verifyCodeForm"
        (ngSubmit)="submitVerifyCodeFrom()"
      >
        <div class="flex mb-2 space-x-2 rtl:space-x-reverse">
          <div>
            <label for="code-1" class="sr-only">First code</label>
            <input
              #code1
              type="text"
              maxlength="1"
              id="code-1"
              class="block w-9 h-9 py-3 text-sm font-extrabold text-center text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-main focus:border-main"
              required
              PinCodeDigitFocus
              [nextDigit]="code2"
              formControlName="codeDigit1"
            />
          </div>
          <div>
            <label for="code-2" class="sr-only">Second code</label>
            <input
              #code2
              type="text"
              maxlength="1"
              id="code-2"
              class="block w-9 h-9 py-3 text-sm font-extrabold text-center text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-main focus:border-main"
              PinCodeDigitFocus
              [nextDigit]="code3"
              [prevDigit]="code1"
              formControlName="codeDigit2"
            />
          </div>
          <div>
            <label for="code-3" class="sr-only">Third code</label>
            <input
              #code3
              type="text"
              maxlength="1"
              id="code-3"
              class="block w-9 h-9 py-3 text-sm font-extrabold text-center text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-main focus:border-main"
              required
              PinCodeDigitFocus
              [nextDigit]="code4"
              [prevDigit]="code2"
              formControlName="codeDigit3"
            />
          </div>
          <div>
            <label for="code-4" class="sr-only">Fourth code</label>
            <input
              #code4
              type="text"
              maxlength="1"
              id="code-4"
              class="block w-9 h-9 py-3 text-sm font-extrabold text-center text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-main focus:border-main"
              required
              PinCodeDigitFocus
              [nextDigit]="code5"
              [prevDigit]="code3"
              formControlName="codeDigit4"
            />
          </div>
          <div>
            <label for="code-5" class="sr-only">Fifth code</label>
            <input
              #code5
              type="text"
              maxlength="1"
              id="code-5"
              class="block w-9 h-9 py-3 text-sm font-extrabold text-center text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-main focus:border-main"
              required
              PinCodeDigitFocus
              [nextDigit]="code6"
              [prevDigit]="code4"
              formControlName="codeDigit5"
            />
          </div>
          <div>
            <label for="code-6" class="sr-only">Sixth code</label>
            <input
              #code6
              type="text"
              maxlength="1"
              id="code-6"
              class="block w-9 h-9 py-3 text-sm font-extrabold text-center text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-main focus:border-main"
              required
              PinCodeDigitFocus
              [prevDigit]="code5"
              formControlName="codeDigit6"
            />
          </div>
        </div>
        <p
          id="helper-text-explanation"
          class="mt-2 text-sm text-gray-500 dark:text-gray-400"
        >
          Please introduce the 6 digit code we sent via email.
        </p>
        <button class="forget-password-btns mt-6">Verify Code</button>
      </form>
      } @else{
      <form
        [formGroup]="setNewPasswordForm"
        (ngSubmit)="submitSetNewPasswordForm()"
      >
        <input-field
          [label]="'New Password'"
          [id]="'password'"
          [name]="'password'"
          [placeholder]="'Ex:xxxxxxxxx'"
          [control]="newPasswordControl"
        >
          <p class="mb-1">Password must contain the following:</p>
          <ul class="list-none">
            <li>
              <i class="fa-solid fa-circle-info text-error"></i> At least one
              capital alphabetic character
            </li>
            <li>
              <i class="fa-solid fa-circle-info text-error"></i> At least one
              small alphabetic character
            </li>
            <li>
              <i class="fa-solid fa-circle-info text-error"></i> At least one
              special character (e.g., ! @ # ?)
            </li>
            <li>
              <i class="fa-solid fa-circle-info text-error"></i> At least 6
              characters
            </li>
          </ul>
        </input-field>
        <button class="forget-password-btns">Reset Password</button>
      </form>
      }
    </div>
    <div
      class="hidden md:flex md:justify-center md:items-center md:col-span-6 bg-main"
    >
      <figure class="hidden md:block md:col-span-6">
        <img
          src="images/auth-pages-side-logo1.png"
          alt="Prestora Logo"
          class="object-cover w-full h-full"
        />
      </figure>
    </div>
  </div>
</section>
